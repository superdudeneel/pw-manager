<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecurePass | Password Manager</title>
    <link href="/css/home.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Master Password Screen -->
    <div class="master-password-screen" id="masterPasswordScreen">
        <div class="master-password-container">
            <div class="master-password-icon">
                <i class="fas fa-shield-alt"></i>
            </div>
            <h2 class="master-password-title">Enter Master Password</h2>
            <p class="master-password-subtitle">Please enter your master password to access your vault</p>
            <form id="masterPasswordForm" method="POST" action="/app">
                <input 
                    type="password" 
                    id="masterPasswordInput" 
                    class="master-password-input" 
                    placeholder="Master Password"
                    name = 'master_password'
                    required
                >
                <div class="master-password-error" id="masterPasswordError">
                    Invalid master password. Please try again.
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-unlock"></i>
                    <span>Unlock Vault</span>
                </button>
            </form>
        </div>
    </div>

    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <span>SecurePass</span>
            </div>
            <nav class="nav-menu">
                <a href="#" class="nav-item active">
                    <i class="fas fa-key"></i>
                    <span>Passwords</span>
                </a>
                <a href="#" class="nav-item">
                    <i class="fas fa-shield-virus"></i>
                    <span>Detect Breaches</span>
                </a>
                
                <div class="nav-item" id="lockVaultBtn" style="margin-top: auto; color: var(--error);">
                    <i class="fas fa-lock"></i>
                    <span>Lock Vault</span>
                </div>
                <div class="nav-item" id="lockVaultBtn" style="margin-top: auto; color: var(--error);">
                    <i class="fas fa-right-from-bracket"></i>
                    <a href="/logout" style="text-decoration: none; color:#ef4444">
                        <span>Logout</span>
                    </a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="header">
                <h1>My Passwords</h1>
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Search passwords...">
                </div>
            </div>

            <div class="actions">
                <button class="btn btn-primary" id="addPasswordBtn">
                    <i class="fas fa-plus"></i>
                    <span>Add Password</span>
                </button>
                <button class="btn btn-outline" id="refreshBtn">
                    <i class="fas fa-sync-alt"></i>
                    <span>Refresh</span>
                </button>
            </div>

            <div class="password-grid" id="passwordGrid">
                <!-- Password cards will be dynamically generated here -->
            </div>
        </main>
    </div>

    <!-- Add/Edit Password Modal -->
    <div class="modal" id="passwordModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Add New Password</h3>
                <button class="close-btn" id="closeModalBtn">&times;</button>
            </div>
            <form id="passwordForm">
                <div class="form-group">
                    <label for="serviceName">Service Name</label>
                    <input type="text" id="serviceName" class="form-control" placeholder="e.g. Google, GitHub" required>
                </div>
                <div class="form-group">
                    <label for="username">Username/Email</label>
                    <input type="text" id="username" class="form-control" placeholder="Enter username or email" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <div class="input-group">
                        <input type="password" id="password" class="form-control" placeholder="Enter password" required>
                        <button type="button" class="btn btn-outline" id="generatePasswordBtn" style="min-width: 120px;">
                            <i class="fas fa-random"></i>
                            <span>Generate</span>
                        </button>
                    </div>
                    <div class="password-strength" id="passwordStrength">
                        <div class="strength-bar">
                            <div class="strength-fill" id="strengthFill"></div>
                        </div>
                        <span id="strengthText">Enter a password</span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="url">Website URL</label>
                    <input type="url" id="url" class="form-control" placeholder="https://example.com">
                </div>
                <div class="form-group">
                    <label for="notes">Notes</label>
                    <textarea id="notes" class="form-control" rows="3" placeholder="Any additional notes"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" id="cancelBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="saveBtn">Save Password</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bcryptjs/2.4.3/bcryptjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-sha1@0.6.0/build/sha1.min.js"></script>

    <script src = 'js/home.js'></script>
</body>
</html>
